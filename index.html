<!DOCTYPE html>
<html>
<head>
    <title>Python Vercel Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 { color: #333; }
        button {
            background: #0070f3;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
            font-size: 16px;
        }
        button:hover { background: #0051bb; }
        #result {
            background: #f8f9fa;
            padding: 15px;
            margin-top: 20px;
            border-radius: 5px;
            white-space: pre-wrap;
            font-family: monospace;
        }
        .success { color: green; }
        .error { color: red; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîß –¢–µ—Å—Ç Python —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–∞ Vercel</h1>
        <p>–ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑–æ–≤–æ–π —Ä–∞–±–æ—Ç—ã Python —Ñ—É–Ω–∫—Ü–∏–∏ –±–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.</p>
        
        <button onclick="testDirect()">1. –¢–µ—Å—Ç –Ω–∞–ø—Ä—è–º—É—é (text/plain)</button>
        <button onclick="testFetch()">2. –¢–µ—Å—Ç —á–µ—Ä–µ–∑ Fetch</button>
        <button onclick="testCurl()">3. –ü–æ–∫–∞–∑–∞—Ç—å cURL –∫–æ–º–∞–Ω–¥—É</button>
        
        <div id="result"></div>
        
        <div style="margin-top: 30px; padding: 15px; background: #e3f2fd; border-radius: 5px;">
            <h3>üìã –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ä—É—á–Ω—É—é:</h3>
            <p>–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ: <a href="/" target="_blank" id="apiUrl"></a></p>
            <p>–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:</p>
            <pre id="curlCommand"></pre>
        </div>
    </div>

    <script>
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–µ–∫—É—â–∏–π URL
        const baseUrl = window.location.origin;
        document.getElementById('apiUrl').href = baseUrl;
        document.getElementById('apiUrl').textContent = baseUrl;
        
        // cURL –∫–æ–º–∞–Ω–¥–∞
        document.getElementById('curlCommand').textContent = `curl -X GET "${baseUrl}"\ncurl -X POST "${baseUrl}" -H "Content-Type: application/json" -d '{"test":"data"}'`;
        
        function showResult(type, message) {
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = `<strong class="${type}">${type.toUpperCase()}:</strong>\n${message}`;
            resultDiv.scrollIntoView({ behavior: 'smooth' });
        }
        
        // –¢–µ—Å—Ç –Ω–∞–ø—Ä—è–º—É—é - –æ–∂–∏–¥–∞–µ–º —Ç–µ–∫—Å—Ç
        async function testDirect() {
            showResult('info', '–û—Ç–ø—Ä–∞–≤–∫–∞ GET –∑–∞–ø—Ä–æ—Å–∞...');
            
            try {
                const response = await fetch('/', {
                    method: 'GET'
                });
                
                const text = await response.text();
                showResult('success', 
                    `–°—Ç–∞—Ç—É—Å: ${response.status}\n` +
                    `–¢–∏–ø –∫–æ–Ω—Ç–µ–Ω—Ç–∞: ${response.headers.get('content-type')}\n\n` +
                    `–û—Ç–≤–µ—Ç:\n${text}`
                );
            } catch (error) {
                showResult('error', `–û—à–∏–±–∫–∞: ${error.message}`);
            }
        }
        
        // –¢–µ—Å—Ç —á–µ—Ä–µ–∑ fetch —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π JSON –æ—à–∏–±–æ–∫
        async function testFetch() {
            showResult('info', '–û—Ç–ø—Ä–∞–≤–∫–∞ POST –∑–∞–ø—Ä–æ—Å–∞...');
            
            try {
                const response = await fetch('/', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ 
                        test: 'data',
                        timestamp: new Date().toISOString()
                    })
                });
                
                // –°–Ω–∞—á–∞–ª–∞ –ø–æ–ª—É—á–∞–µ–º –∫–∞–∫ —Ç–µ–∫—Å—Ç
                const text = await response.text();
                
                // –ü—ã—Ç–∞–µ–º—Å—è —Ä–∞–∑–æ–±—Ä–∞—Ç—å –∫–∞–∫ JSON
                try {
                    const json = JSON.parse(text);
                    showResult('success',
                        `–°—Ç–∞—Ç—É—Å: ${response.status}\n` +
                        `–¢–∏–ø –∫–æ–Ω—Ç–µ–Ω—Ç–∞: ${response.headers.get('content-type')}\n\n` +
                        `JSON –æ—Ç–≤–µ—Ç:\n${JSON.stringify(json, null, 2)}`
                    );
                } catch {
                    // –ï—Å–ª–∏ –Ω–µ JSON, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–µ–∫—Å—Ç
                    showResult('success',
                        `–°—Ç–∞—Ç—É—Å: ${response.status}\n` +
                        `–¢–∏–ø –∫–æ–Ω—Ç–µ–Ω—Ç–∞: ${response.headers.get('content-type')}\n\n` +
                        `–¢–µ–∫—Å—Ç–æ–≤—ã–π –æ—Ç–≤–µ—Ç:\n${text}`
                    );
                }
            } catch (error) {
                showResult('error', `–û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ${error.message}`);
            }
        }
        
        function testCurl() {
            showResult('info', 
                'cURL –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:\n\n' +
                document.getElementById('curlCommand').textContent
            );
        }
        
        // –ê–≤—Ç–æ-—Ç–µ—Å—Ç –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.addEventListener('load', () => {
            setTimeout(() => {
                showResult('info', '‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é!\n–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "1. –¢–µ—Å—Ç –Ω–∞–ø—Ä—è–º—É—é" –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏.');
            }, 1000);
        });
    </script>
</body>
</html>