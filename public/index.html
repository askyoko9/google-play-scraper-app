<!DOCTYPE html>
<html>
<head>
    <title>Python Test</title>
    <style>
        body { font-family: Arial; max-width: 800px; margin: 0 auto; padding: 20px; }
        button { padding: 10px 20px; margin: 5px; background: #0070f3; color: white; border: none; cursor: pointer; }
        #result { background: #f5f5f5; padding: 20px; margin-top: 20px; white-space: pre-wrap; }
        .success { color: green; }
        .error { color: red; }
    </style>
</head>
<body>
    <h1>üîß –¢–µ—Å—Ç Python –Ω–∞ Vercel</h1>
    
    <button onclick="testGET()">1. –¢–µ—Å—Ç GET –∑–∞–ø—Ä–æ—Å–∞</button>
    <button onclick="testPOST()">2. –¢–µ—Å—Ç POST –∑–∞–ø—Ä–æ—Å–∞</button>
    <button onclick="checkDirect()">3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ø—Ä—è–º—É—é</button>
    
    <div id="result">–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –¥–ª—è —Ç–µ—Å—Ç–∞...</div>
    
    <script>
        async function testGET() {
            showResult('–û—Ç–ø—Ä–∞–≤–∫–∞ GET –∑–∞–ø—Ä–æ—Å–∞...', 'info');
            
            try {
                // –ü—Ä–æ–±—É–µ–º —Ä–∞–∑–Ω—ã–µ URL
                const urls = ['/api', '/api/', '/api/index'];
                
                for (const url of urls) {
                    showResult(`–ü—Ä–æ–±—É–µ–º ${url}...`, 'info');
                    
                    try {
                        const response = await fetch(url);
                        const text = await response.text();
                        
                        showResult(
                            `${url}: –°—Ç–∞—Ç—É—Å ${response.status}\n` +
                            `–ó–∞–≥–æ–ª–æ–≤–∫–∏: ${JSON.stringify([...response.headers])}\n` +
                            `–û—Ç–≤–µ—Ç: ${text.substring(0, 300)}`,
                            response.ok ? 'success' : 'error'
                        );
                        
                        if (response.ok) break;
                    } catch (e) {
                        showResult(`${url}: –û—à–∏–±–∫–∞ - ${e.message}`, 'error');
                    }
                }
            } catch (error) {
                showResult(`–û–±—â–∞—è –æ—à–∏–±–∫–∞: ${error.message}`, 'error');
            }
        }
        
        async function testPOST() {
            showResult('–û—Ç–ø—Ä–∞–≤–∫–∞ POST –∑–∞–ø—Ä–æ—Å–∞...', 'info');
            
            try {
                const response = await fetch('/api', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ test: 'data' })
                });
                
                const text = await response.text();
                showResult(
                    `POST: –°—Ç–∞—Ç—É—Å ${response.status}\n` +
                    `–û—Ç–≤–µ—Ç: ${text.substring(0, 300)}`,
                    response.ok ? 'success' : 'error'
                );
            } catch (error) {
                showResult(`POST –æ—à–∏–±–∫–∞: ${error.message}`, 'error');
            }
        }
        
        function checkDirect() {
            const url = window.location.origin + '/api';
            showResult(
                `–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Ä—É—á–Ω—É—é:\n` +
                `1. –û—Ç–∫—Ä–æ–π—Ç–µ: ${url}\n` +
                `2. –ò–ª–∏ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ: curl "${url}"\n` +
                `3. –ò–ª–∏: curl -X POST "${url}" -H "Content-Type: application/json" -d '{"test":"data"}'`,
                'info'
            );
            
            // –û—Ç–∫—Ä—ã–≤–∞–µ–º –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ
            window.open(url, '_blank');
        }
        
        function showResult(message, type) {
            const result = document.getElementById('result');
            result.innerHTML = `<div class="${type}">${message}</div>`;
        }
    </script>
</body>
</html>